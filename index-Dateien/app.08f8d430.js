(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[143],{573:(t,e,i)=>{"use strict";var s=i(755),n=i.n(s),o=i(256),a=i.n(o),r=i(975),l=i.n(r),h=i(209),c=i.n(h);const d=767;function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("ad-google",class{initialize(t,e){void 0===window.googletag||window.innerWidth<=d&&e.hideOnMobile||window.innerWidth>d&&e.hideOnDesktop?t.remove():window.googletag.cmd.push((()=>{window.googletag.display(t.id)}))}});a().registerComponent("collection-field",class{constructor(){u(this,"$el",void 0),u(this,"$container",void 0),u(this,"$template",void 0),u(this,"$button",void 0),u(this,"initialize",(t=>{this.$el=s(t),this.$container=s(`#${t.id}-container`),this.$template=s(`#${t.id}-template`),this.$button=s(`#${t.id}-button`),this.$button.click(this.handleClick),this.$container.find(".js-collection-field-remove-button").click((t=>{s(t.currentTarget).closest(".js-collection-field-item").remove()}))})),u(this,"handleClick",(()=>{let t=this.$el.data("widget-counter")||this.$container.children().length,e=this.$template.html();e=e.replace(/__name__/g,t),this.$el.data("widget-counter",++t);const i=s(e);i.appendTo(this.$container),i.find(".js-collection-field-remove-button").click((()=>{i.remove()}))}))}});i(154);function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const p=/#seite([0-9]+)/;function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("content-gallery",class{constructor(){g(this,"$el",void 0),g(this,"$imageSlider",void 0),g(this,"$contentSlider",void 0),g(this,"initialize",((t,e)=>{this.$el=n()(t),this.$imageSlider=this.$el.find(`#${t.id}-image-slider`),this.$contentSlider=this.$el.find(`#${t.id}-content-slider`);let i=e.initialPage?e.initialPage-1:0;if(p.test(window.location.hash)){i=window.location.hash.match(p)[1]-1}this.initializeSlick(i),"onhashchange"in window&&n()(window).on("hashchange",(()=>{if(p.test(window.location.hash)){const t=window.location.hash.match(p)[1]-1;this.$imageSlider.slick("slickCurrentSlide")!==t&&this.$imageSlider.slick("slickGoTo",t)}}))})),g(this,"initializeSlick",(t=>{this.$imageSlider.slick({adaptiveHeight:!1,arrows:!0,asNavFor:`#${this.$contentSlider.attr("id")}`,dots:!1,infinite:!1,slidesToShow:1,initialSlide:t});const e=this.$contentSlider.slick({accessibility:!1,adaptiveHeight:!0,arrows:!1,dots:!1,draggable:!1,fade:!0,infinite:!1,slidesToShow:1,swipe:!1,touchMove:!1,initialSlide:t}),i=new ResizeObserver((()=>{e.slick("setOption","adaptiveHeight",!0,!0)}));this.$contentSlider.find("[data-variable-height]").each(((t,e)=>{i.observe(e)})),this.$imageSlider.on("afterChange",((t,e,i)=>{window.location.hash=`#seite${i+1}`}))}))}});function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("expand-location",class{constructor(){m(this,"getFirstClass",(t=>t.attr("class").split(" ")[0])),m(this,"bindEvents",(()=>{this.$el.on("click",this.toggle),this.closeOnEsc&&n()(document).keyup((function(t){27===t.keyCode&&this.close()}))})),m(this,"toggle",(()=>{this.$el.toggleClass(this.toggleMainButtonClass),this.$container.toggleClass(this.toggleContainerClass),this.isEllipsized?this.setOriginalText():this.setEllipsizedText()})),m(this,"close",(()=>{this.$el.removeClass(this.toggleMainButtonClass),this.$container.removeClass(this.toggleContainerClass)})),m(this,"setEllipsizedText",(()=>{this.$descriptionContainer.html(this.ellipsizedText),this.afterComponent&&this.originalText.length!==this.ellipsizedText.length?(this.$button.on("click",this.toggle),this.$nonDescriptionContainer.css("display","none"),this.$descriptionContainer.append(this.$button)):this.$el.remove(),this.isEllipsized=!0})),m(this,"setOriginalText",(()=>{this.$descriptionContainer.html(this.originalText),this.isEllipsized=!1,this.$nonDescriptionContainer.css("display","")})),m(this,"getEllipsizedText",(()=>{var t=this.originalText.split(""),e=[],i=0;if(this.originalText.length<=0||this.originalText.length<=this.limit)return this.originalText;for(;(i<this.limit||" "!==t[i])&&i<t.length;)""!==t[i]&&e.push(t[i]),++i;return e.length<t.length&&e.push(" ... "),e.join("")}))}initialize(t,e){this.$el=n()(t),this.id=this.$el.attr("id"),this.closeOnEsc=!!e.closeOnEsc&&e.closeOnEsc,this.$container=e.container?n()("#"+e.container):n()("#"+this.id+"-container"),this.$descriptionContainer=this.$container.find("p"),this.$nonDescriptionContainer=this.$container.find(":not(p)"),this.modifier=e.modifier?e.modifier:"--open",this.toggleMainButtonClass=this.getFirstClass(this.$el)+this.modifier,this.toggleContainerClass=this.getFirstClass(this.$container)+this.modifier,this.$image=e.image?n()("#"+e.image):n()("#"+this.id+"-image"),this.limit=e.limit?e.limit:250,this.afterComponent=e.afterComponent,this.afterComponent&&(this.$button=n()(this.afterComponent),this.$button.attr("id",this.id+"-button")),this.originalText=this.$descriptionContainer.html().trim(),this.ellipsizedText=this.getEllipsizedText(),this.setEllipsizedText(),this.bindEvents()}});const b={email:null,formOfAddress:null,title:null,firstName:null,lastName:null,phoneNumber:null,street:null,streetNumber:null,zip:null,city:null,country:null};const v=new class{constructor(){f(this,"storeUserInfo",(t=>{window.localStorage.setItem("user-info",JSON.stringify(Object.assign({},t,{storeTimestamp:Date.now()})))})),f(this,"loadUserInfo",(t=>fetch(t,{method:"GET"}).then((t=>t.headers.get("content-type").includes("application/json")?t.json():b)))),f(this,"resetUserInfo",(t=>{this.loadUserInfo(t).then(this.storeUserInfo)})),f(this,"initialize",(({url:t,force:e=!1})=>{if(e)return void this.resetUserInfo(t);const i=window.localStorage.getItem("user-info");if(null===i)return void this.resetUserInfo(t);const s=JSON.parse(i);("object"!=typeof s||Array.isArray(s)||null===s||!("storeTimestamp"in s)||Number.isNaN(s.storeTimestamp)||s.storeTimestamp+864e5<Date.now())&&this.resetUserInfo(t)})),f(this,"getUserInfo",(()=>{const t=window.localStorage.getItem("user-info");if(null===t)return b;const e=JSON.parse(t);if("object"!=typeof e||Array.isArray(e)||null===e)return b;const i=Object.assign({},b),s=Object.entries(e);for(const t in s){const[e,n]=s[t];e in i&&n&&(i[e]=n)}return i}))}};a().registerService("user-info",v);const w=v;const $={email:"email",formOfAddress:"salutation",title:"title",firstName:"firstName",lastName:"lastName",phoneNumber:"phone",street:"street",streetNumber:"streetNumber",zip:"zip",city:"city",country:"country"};a().registerComponent("form",class{constructor(){var t,e,i;i=t=>{if(!(t instanceof HTMLFormElement))return;const e=w.getUserInfo(),i=t.elements;for(const s of i){if(!(s instanceof HTMLInputElement||s instanceof HTMLSelectElement))continue;const i=Object.entries(e);for(const[e,n]of i)n&&"string"==typeof n&&s.name.match(`^${t.name}\\[${$[e]}[0-9]*\\]$`)&&(s.value=n)}},(e="initialize")in(t=this)?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}});var C=i(776);a().registerComponent("lightbox",class{constructor(){var t,e,s;s=t=>{new C.Z({gallery:`#${t.id}`,pswpModule:()=>i.e(255).then(i.bind(i,255))}).init()},(e="initialize")in(t=this)?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s}});var y=i(990);a().registerComponent("locations-map",class{initialize(t){this.el=t,this.mapContainer=document.getElementById(this.el.id+"-map"),this.container=document.getElementById(this.el.id+"-content-container"),this.markerCluster=null,this.ignoreMarkerZoom=!1,this.apiUrl="/api/locations/overview",this.filtersVisible=!1,this.inner=document.getElementById(this.el.id+"-inner"),this.listView=this.inner.getAttribute("data-list-view"),this.URL_PARAMS=["page","search"],this.initVariables(),this.getBrowserLocation(),this.mapCenter=JSON.parse(this.centerLatLongInput.getAttribute("data-center-value")),this.initMap(),this.bindEvents()}getBrowserLocation(t=!1){this.boundingInput.value="",navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const e=[t.coords.latitude,t.coords.longitude];this.mapCenter=e,this.centerLatLongInput.value=JSON.stringify(e),this.searchLocations(!1),this.setCorrectDistance(),this.map.setCenter({lat:this.mapCenter[0],lng:this.mapCenter[1]})}),(()=>{t&&this.resetToDefault()})):t&&this.resetToDefault()}resetToDefault(){const t=[this.mapCenter[0],this.mapCenter[1]];this.mapCenter=t,this.centerLatLongInput.value=JSON.stringify(t),this.searchLocations(!1),this.setCorrectDistance(),this.map.setCenter({lat:this.mapCenter[0],lng:this.mapCenter[1]}),this.map.setZoom(12)}initVariables(){this.form=document.getElementById(this.el.id+"-form"),this.filtersToggler=document.getElementById(this.el.id+"-filters-toggler"),this.filters=document.getElementById(this.el.id+"-filters"),this.checkboxes=this.el.querySelectorAll('input[type="checkbox"]'),this.filtersMoreBtns=this.el.querySelectorAll("[data-filter-group-id]"),this.removeFiltersBtns=this.el.querySelectorAll("[data-active-filter-id]"),this.clearFiltersBtn=document.getElementById(this.el.id+"-filters-clear"),this.searchClearBtn=document.getElementById(this.el.id+"-search-clear"),this.paginationBtns=this.el.querySelectorAll("[data-page]"),this.searchInput=document.getElementById(this.el.id+"-search"),this.locations=this.el.querySelectorAll('[data-location-marker="true"]'),this.centerLatLongInput=document.getElementById(this.el.id+"-center-lat-long"),this.boundingInput=document.getElementById(this.el.id+"-bounding"),this.locationBtn=this.el.querySelectorAll("[data-location-id]"),this.pageInput=document.getElementById(this.el.id+"-page"),this.listViewToggleBtn=document.getElementById(this.el.id+"-list-view-toggle"),this.resetLocationBtn=document.getElementById(this.el.id+"-reset-location"),this.legend=document.getElementById(this.el.id+"-legend"),this.legendItems=this.legend.querySelectorAll("[data-classification]"),this.markers=[],this.bounds=null,this.isFocus=!1,this.filtersVisible=this.form.getAttribute("data-show-filters"),this.URL_PARAMS=this.URL_PARAMS.concat(JSON.parse(this.form.getAttribute("data-url-params")))}bindEvents(){this.form.addEventListener("submit",(t=>{t.preventDefault(),this.searchLocations(!0)})),this.filtersToggler.addEventListener("click",(()=>{this.toggleFilters()})),this.listViewToggleBtn.addEventListener("click",(()=>{this.toggleListView()})),this.checkboxes.forEach((t=>{t.addEventListener("change",(()=>{this.searchLocations()}))})),this.filtersMoreBtns.forEach((t=>{t.addEventListener("click",(t=>{this.toggleMoreFilters(t)}))})),this.removeFiltersBtns.forEach((t=>{t.addEventListener("click",(t=>{this.resetFilter(t)}))})),this.clearFiltersBtn&&this.clearFiltersBtn.addEventListener("click",(()=>{this.clearFilters()})),this.paginationBtns.forEach((t=>{t.addEventListener("click",(t=>{this.handlePaginationClick(t)}))})),this.searchClearBtn.addEventListener("click",(()=>{this.resetSearch()})),this.searchInput.addEventListener("input",(()=>{this.handleSearchChange()})),this.locationBtn.forEach((t=>{t.addEventListener("focus",(t=>{this.focusMarker(t)}))})),this.resetLocationBtn.addEventListener("click",(()=>{this.getBrowserLocation(!0)}))}async initMap(){const{Map:t}=await google.maps.importLibrary("maps"),e={lat:this.mapCenter[0],lng:this.mapCenter[1]};this.map=new t(this.mapContainer,{center:e,zoom:12}),this.addMarkers(),this.setCorrectDistance(),""!==this.searchInput.value&&this.bounds&&this.map.fitBounds(this.bounds);let i=!0;this.idleListener=this.map.addListener("idle",(()=>{i||this.handleBoundsChange(),i=!1}))}async searchLocations(t=!1,e=!1){if(this.removeMapListener(),"true"===this.inner.getAttribute("data-list-view")&&(this.boundingInput.value="",this.centerLatLongInput.value=""),this.isFocus)return this.isFocus=!1,void this.addMapListener();t&&(this.boundingInput.value="");const i=new URLSearchParams(new FormData(this.form));let s="";i&&(s="?"+i.toString()),s=s+"&filtersVisible="+this.filtersVisible,s=s+"&listView="+this.listView;const n=this.apiUrl+s;this.container.setAttribute("aria-busy","true");const o=await fetch(n),a=await o.text();this.container.innerHTML=a,this.handleData(a),t&&!a.includes("Keine Ergebnisse gefunden")&&this.bounds&&this.map.fitBounds(this.bounds),this.container.removeAttribute("aria-busy"),this.updateURL(i),this.searchlistener=this.map.addListener("idle",(()=>{this.addMapListener()})),this.hasVisibleMarkers()||!this.centerLatLongInput.value||e||this.map.setZoom(4)}hasVisibleMarkers(){return 0!==this.markers.length&&this.map.getBounds().contains(this.markers[0].getPosition())}updateURL(t){const e=new URLSearchParams;t.forEach(((t,i)=>{this.URL_PARAMS.includes(i.replace("[]",""))&&""!==t&&e.append(i,t)}));let i=window.location.pathname+"?"+e.toString();i=i+"&filtersVisible="+this.filtersVisible,i=i+"&listView="+this.listView,window.history.pushState("locations","locations",i)}handleData(t){this.container.innerHTML=t,this.reInit()}reInit(){this.removeMarkers(),this.initVariables(),this.bindEvents(),this.resetSelectedMarkers(),this.addMarkers(),this.setCorrectDistance(),this.updateLegend()}toggleMoreFilters(t){const e=t.currentTarget,i=e.getAttribute("data-filter-group-id"),s=document.getElementById(i).querySelectorAll('[data-more="true"]'),n=e.querySelector('[data-show-more="false"]'),o=e.querySelector('[data-show-more="true"]');s.forEach((t=>{t.hasAttribute("hidden")?(t.removeAttribute("hidden"),n.removeAttribute("hidden"),o.setAttribute("hidden",!0)):(t.setAttribute("hidden",!0),o.removeAttribute("hidden"),n.setAttribute("hidden",!0))}))}resetFilter(t){const e=t.currentTarget.getAttribute("data-active-filter-id");document.getElementById(e).checked=!1}clearFilters(){this.checkboxes.forEach((t=>{t.checked=!1}))}toggleFilters(){const t="true"===this.form.getAttribute("data-show-filters")?"false":"true";this.form.setAttribute("data-show-filters",t);const e=new URL(window.location.href);this.filtersVisible=t,e.searchParams.set("filtersVisible",t),window.history.pushState("locations","locations",e.href)}toggleListView(){const t="true"===this.inner.getAttribute("data-list-view")?"false":"true";this.inner.setAttribute("data-list-view",t),"false"===t&&(this.boundingInput.value=this.boundingInput.getAttribute("data-bounding-value"),this.centerLatLongInput.value=this.centerLatLongInput.getAttribute("data-center-value")),this.searchLocations();const e=new URL(window.location.href);this.listView=t,e.searchParams.set("listView",t),window.history.pushState("locations","locations",e.href)}handlePaginationClick(t){t.preventDefault();const e=t.currentTarget.getAttribute("data-page");this.pageInput.value=e,this.searchLocations()}resetSearch(){this.searchInput.value="",this.searchLocations()}handleSearchChange(){""===this.searchInput.value?this.searchClearBtn.setAttribute("hidden",!0):this.searchClearBtn.removeAttribute("hidden",!0)}addMarkers(){if(0===this.locations.length)return;this.bounds=new google.maps.LatLngBounds,this.locations.forEach((t=>{const e=t.querySelector("[data-location-id]").getAttribute("data-location-id"),i=t.getAttribute("data-location-type"),s={lat:parseFloat(t.getAttribute("data-location-lat")),lng:parseFloat(t.getAttribute("data-location-lng"))},n={url:`/sites/feinschmecker/images/location-pin-${i}.svg`,scaledSize:new google.maps.Size(45,45)},o=new google.maps.Marker({id:e,position:s,map:this.map,icon:n});o.addListener("click",(()=>{this.handleMarkerClick(o)})),this.markers.push(o),this.bounds.extend(s)}));const t={url:"/sites/feinschmecker/images/cluster-icon.svg",scaledSize:new google.maps.Size(50,50)};this.markerCluster=new y.XL({markers:this.markers,map:this.map,renderer:{render:({markers:e,_position:i})=>new google.maps.Marker({position:{lat:i.lat(),lng:i.lng()},label:{text:String(e.length),color:"white",fontWeight:"bold"},icon:t})}})}handleMarkerClick(t){const e=this.el.querySelector('[data-location-id="'+t.id+'"]');this.form.setAttribute("data-show-filters","false");const i=new URL(window.location.href);this.filtersVisible="false",i.searchParams.set("filtersVisible","false"),window.history.pushState("locations","locations",i.href),this.ignoreMarkerZoom=!0,e.focus()}setCorrectDistance(){this.locations.forEach((t=>{const e=new google.maps.LatLng(t.getAttribute("data-location-lat"),t.getAttribute("data-location-lng")),i=new google.maps.LatLng(this.mapCenter[0],this.mapCenter[1]);const s=(google.maps.geometry.spherical.computeDistanceBetween(i,e)/1e3).toFixed(2)+" km";t.querySelector(".location-map__content-location-distance").innerText=s}))}removeMarkers(){0!==this.markers.length&&this.markerCluster&&(this.markers.forEach((t=>{t.setMap(null)})),this.markerCluster.clearMarkers(),this.markers=[])}handleBoundsChange(){const t=this.map.getBounds(),e=t.getNorthEast(),i=t.getSouthWest(),s={top_left:[i.lng(),e.lat()],bottom_right:[e.lng(),i.lat()]};this.boundingInput.value=JSON.stringify(s),this.centerLatLongInput.value="",this.pageInput.value=1,this.searchLocations(!1,!0)}removeMapListener(){google.maps.event.removeListener(this.idleListener),google.maps.event.removeListener(this.searchlistener)}addMapListener(){this.idleListener=this.map.addListener("idle",this.handleBoundsChange.bind(this))}focusMarker(t){const e=t.currentTarget,i=e.closest("[aria-selected]"),s=e.getAttribute("data-location-id"),n=this.markers.find((t=>t.id===s));this.resetSelectedMarkers(),i.setAttribute("aria-selected","true"),n&&(this.ignoreMarkerZoom?this.ignoreMarkerZoom=!1:this.setMarkerZoom(n))}resetSelectedMarkers(){this.el.querySelectorAll("[data-location-marker]").forEach((t=>{t.setAttribute("aria-selected","false")}))}setMarkerZoom(t){this.isFocus=!0,this.map.setZoom(18),this.map.setCenter(t.position)}updateLegend(){let t=[];this.locations.forEach((e=>{const i=e.getAttribute("data-location-type");t=[...t,i]})),this.legendItems.forEach((e=>{e.setAttribute("hidden",!0),e.setAttribute("aria-hidden",!0),t.includes(e.getAttribute("data-classification"))&&(e.removeAttribute("hidden"),e.removeAttribute("aria-hidden"))}))}});var S=i(841),k=i.n(S);function L(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function E(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("navigation-fixed",class{constructor(){L(this,"$el",void 0),L(this,"$toggler",void 0),L(this,"isNotTop",!1),L(this,"handleScroll",(()=>{if(window.scrollY>=this.navigationHeight-this.navigationItemsHeight){if(this.isNotTop)return;return this.isNotTop=!0,n()(document.body).addClass("body--navigation-not-top"),void this.$el.addClass(`${this.getFirstClass(this.$el)}--not-top`)}this.isNotTop&&(this.isNotTop=!1,n()(document.body).removeClass("body--navigation-not-top"),this.$el.removeClass(`${this.getFirstClass(this.$el)}--not-top`))})),L(this,"handleClick",(t=>{t.preventDefault(),this.$el.toggleClass(`${this.getFirstClass(this.$el)}--open`),n()(document.body).toggleClass("body--navigation-open")})),L(this,"getFirstClass",(t=>{var e;return null===(e=t.attr("class"))||void 0===e?void 0:e.split(" ")[0]}))}initialize(t,e){this.$el=n()(t),this.$toggler=this.$el.find(`#${t.id}-toggler`),this.navigationHeight=e.navigationHeight??255,this.navigationItemsHeight=e.navigationItemsHeight??42,this.$toggler.on("click",this.handleClick),window.addEventListener("scroll",this.handleScroll,!!k()&&{passive:!0})}});function T(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("navigation-b",class{constructor(){E(this,"$el",void 0),E(this,"blocked",!1),E(this,"initialize",((t,e)=>{this.$el=n()(t);for(const t of e.togglerIds){var i;null===(i=this.$el.find("#"+t))||void 0===i||i.on("click",this.handleClick)}window.addEventListener("scroll",this.handleScroll,!!k()&&{passive:!0})})),E(this,"handleScroll",(()=>{if(this.blocked)return;if(window.innerWidth<=d)return;const t=`${this.getFirstClass(this.$el)}--fixed`;window.scrollY>700?this.$el.hasClass(t)||(this.blocked=!0,this.$el.hide(),this.$el.addClass(t),this.$el.fadeIn(200,(()=>{this.blocked=!1}))):this.$el.hasClass(t)&&(this.blocked=!0,this.$el.fadeOut(100,(()=>{this.$el.removeClass(t),this.$el.show(),this.blocked=!1})))})),E(this,"handleClick",(t=>{t.preventDefault();const e=`${this.getFirstClass(this.$el)}--open`,i=this.$el.hasClass(e);if(this.toggle(!i,e),i)return;n()(t.currentTarget).data("autofocus-search")&&this.$el.find("[data-search-input]").filter(":visible:first").focus()})),E(this,"toggle",((t,e)=>{this.$el.toggleClass(e,t),n()(document.body).toggleClass("body--navigation-open",t),t?n()(window).on("keydown",this.handleKeyDown):n()(window).off("keydown",this.handleKeyDown)})),E(this,"handleKeyDown",(t=>{if("Escape"===t.key){t.preventDefault();const e=`${this.getFirstClass(this.$el)}--open`;this.toggle(!1,e)}})),E(this,"getFirstClass",(t=>{var e;return null===(e=t.attr("class"))||void 0===e?void 0:e.split(" ")[0]}))}});function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("paypal-capture",class{constructor(){T(this,"el",void 0),T(this,"url",void 0),T(this,"successUrl",void 0),T(this,"articleId",void 0),T(this,"initialize",((t,e)=>{this.el=t,this.url=e.url,this.successUrl=e.successUrl,this.articleId=e.articleId,this.el.addEventListener("click",this.capture)})),T(this,"capture",(async()=>{this.el.querySelector("button").setAttribute("disabled",!0);try{const t=await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleId:this.articleId})}),e=await t.json(),i=Array.isArray(e.details)&&e.details[0];if(e.code&&200!==e.code)return void(window.location.href=this.successUrl+"?failure=true&type=invoice-failed");i&&"INSTRUMENT_DECLINED"===i.issue?window.location.href=this.successUrl+"?failure=true&type=instrument-declined":window.location.href=i?this.successUrl+"?failure=true&type=payment-failed":this.successUrl}catch(t){window.location.href=this.successUrl+"?failure=true"}}))}});a().registerComponent("premium-club-cancellation",class{constructor(){A(this,"$el",void 0),A(this,"id",void 0),A(this,"$container",void 0),A(this,"$initiateButton",void 0),A(this,"$cancelButton",void 0),A(this,"$textArea",void 0),A(this,"$success",void 0),A(this,"$error",void 0),A(this,"initialize",(t=>{this.$el=s(t),this.id=this.$el.attr("id"),this.$container=this.$el.find("#"+this.id+"-container"),this.$initiateButton=this.$el.find("#"+this.id+"-initiate"),this.$cancelButton=this.$el.find("#"+this.id+"-cancel"),this.$textArea=this.$el.find("#"+this.id+"-text"),this.$success=this.$el.find("#"+this.id+"-success"),this.$error=this.$el.find("#"+this.id+"-error"),this.bindEvents()})),A(this,"bindEvents",(()=>{this.$initiateButton.on("click",this.toggleVisibility),this.$textArea.on("input",this.onTextChange),this.$cancelButton.on("click",this.cancel)})),A(this,"onTextChange",(t=>{t.target.value.length>0&&this.$cancelButton.prop("disabled",!1)})),A(this,"toggleVisibility",(()=>{this.$container.toggleClass(this.getFirstClass(this.$container)+"--visible"),this.$initiateButton.parent().toggleClass(this.getFirstClass(this.$initiateButton.parent())+"--hidden")})),A(this,"cancel",(()=>{fetch("/club/api/cancel",{method:"POST",body:JSON.stringify({reason:this.$textArea.val()})}).then((t=>{t.ok?(this.$success.toggleClass(this.getFirstClass(this.$success)+"--visible"),this.$container.toggleClass(this.getFirstClass(this.$container)+"--visible")):this.$error.addClass(this.getFirstClass(this.$error)+"--visible")}))})),A(this,"getFirstClass",(t=>t.attr("class").split(" ")[0]))}});var I=i(331),B=i.n(I);function M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("qr-code",class{constructor(){var t,e,i;i=(t,e)=>{new(B())({element:document.getElementById(t.id),value:e.value})},(e="initialize")in(t=this)?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}});function O(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("slider",class{constructor(){M(this,"$el",void 0),M(this,"options",void 0),M(this,"initialize",((t,e)=>{this.$el=n()(t),this.options=e,this.options.disableOnMobile&&this.options.disableOnDesktop||(this.initializeSlick(),(this.options.disableOnMobile||this.options.disableOnDesktop)&&window.addEventListener("resize",this.initializeSlick,!!k()&&{passive:!0}))})),M(this,"initializeSlick",(()=>{this.shouldBeDisabled()?this.isEnabled()&&this.disable():this.isEnabled()||this.enable()})),M(this,"enable",(()=>{const t={arrows:!0,dots:!0,infinite:!0,speed:300,slidesToShow:1,adaptiveHeight:!1,responsive:[{breakpoint:d,settings:{arrows:!1}}]};this.options.disableOnDesktop&&(t.arrows=!1,t.responsive=null),this.options.disableOnMobile&&(t.arrows=!0,t.responsive=null);const e={...t,...this.options.slickOptions};this.$el.slick(e)})),M(this,"disable",(()=>{this.$el.slick("unslick")})),M(this,"isEnabled",(()=>this.$el.hasClass("slick-initialized"))),M(this,"shouldBeDisabled",(()=>window.innerWidth<=d&&this.options.disableOnMobile||window.innerWidth>d&&this.options.disableOnDesktop))}});a().registerComponent("partner-slider",class{constructor(){O(this,"$el",void 0),O(this,"options",void 0),O(this,"initialize",((t,e)=>{this.$el=n()(t),this.options=e,this.options.disableOnMobile&&this.options.disableOnDesktop||(this.initializeSlick(),(this.options.disableOnMobile||this.options.disableOnDesktop)&&window.addEventListener("resize",this.initializeSlick,!!k()&&{passive:!0}))})),O(this,"initializeSlick",(()=>{this.shouldBeDisabled()?this.isEnabled()&&this.disable():this.isEnabled()||this.enable()})),O(this,"enable",(()=>{const t={arrows:!0,dots:!0,infinite:!0,speed:300,swipeToSlide:!0,centerMode:!0,variableWidth:!0,adaptiveHeight:!1,autoplay:!0,autoplaySpeed:2e3,responsive:[{breakpoint:d,settings:{arrows:!1}}]};this.options.disableOnDesktop&&(t.arrows=!1,t.responsive=null),this.options.disableOnMobile&&(t.arrows=!0,t.responsive=null);const e={...t,...this.options.slickOptions};this.$el.slick(e)})),O(this,"disable",(()=>{this.$el.slick("unslick")})),O(this,"isEnabled",(()=>this.$el.hasClass("slick-initialized"))),O(this,"shouldBeDisabled",(()=>window.innerWidth<=d&&this.options.disableOnMobile||window.innerWidth>d&&this.options.disableOnDesktop))}});a().registerComponent("csrf-token",class{initialize(t,e){fetch("/_form/token?form="+e.formName+"&html=0").then((t=>t.ok?t.text():Promise.reject(t))).then((e=>{t.value=e}))}});var z=i(211),R=i.n(z);function x(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("range-slider",class{constructor(){var t,e,i;i=(t,e)=>{const i=e.min,s=e.max,n=e.start??i+s/5,o=e.end??s-s/5,a=document.getElementById(`${t.id}-from-input`),r=document.getElementById(`${t.id}-to-input`);R().create(t,{start:[n,o],tooltips:!0,step:1,range:{min:i,max:s},format:{to:t=>Math.ceil(t),from:t=>Math.floor(t)}}),t.noUiSlider.on("change",(t=>{a.value=t[0],r.value=t[1]}))},(e="initialize")in(t=this)?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}});function D(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("horizontal-scroll-position",class{constructor(){x(this,"initialize",(t=>{this.$el=s(t),this.$scrollElement=this.$el.find(`#${this.$el.attr("id")}-scroll`),this.updateScrollPosition(),this.$scrollElement[0].addEventListener("scroll",this.updateScrollPosition,!!k()&&{passive:!0})})),x(this,"updateScrollPosition",(()=>{const t=this.$scrollElement.scrollLeft()+this.$scrollElement.width(),e=this.$scrollElement[0].scrollWidth;this.$el.attr("data-scroll-start",0===this.$scrollElement.scrollLeft()),this.$el.attr("data-scroll-end",t===e)}))}});function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("filter-dropdown",class{constructor(){D(this,"toggleDropdown",(t=>{const e=t.currentTarget,i="true"===e.getAttribute("data-active");e.setAttribute("data-active",!i)})),D(this,"closeDropdowns",(t=>{const e=t.target;this.$el[0].contains(e)||this.$el[0].setAttribute("data-active",!1)}))}initialize(t){this.$el=n()(t),this.$window=n()(window),this.$el.on("click",this.toggleDropdown),this.$window.on("click",this.closeDropdowns)}});a().registerComponent("scroll-top",class{constructor(){P(this,"handleButtonState",(()=>{const t=window.scrollY<=this.$window.height()/2;this.$el.prop("disabled",t)})),P(this,"handleButtonPosition",(()=>{const t=window.scrollY+this.$window.height(),e=this.$el.outerHeight(),i=this.$el.offset().top+this.$el.outerHeight(),s=this.$footer.offset().top;if(i>s&&!this.$el.hasClass("scroll-top--absolute"))return this.$el.addClass("scroll-top--absolute"),void this.$el.css("top",s-e+"px");t<=i+.1*this.$window.height()&&(this.$el.removeClass("scroll-top--absolute"),this.$el.css("top","inherit"))})),P(this,"scrollToTop",(()=>{n()("html, body").scrollTop(0)}))}initialize(t){this.$el=n()(t),this.$window=n()(window),this.$footer=n()("footer"),window.addEventListener("scroll",this.handleButtonState,!!k()&&{passive:!0}),window.addEventListener("scroll",this.handleButtonPosition,!!k()&&{passive:!0}),this.$el.on("click",(()=>this.scrollToTop()))}});function F(t,e){return fetch(t,{...e,credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e?e.headers:{}}})}function N(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}a().registerComponent("countdown-counter",class{initialize(t,e){const i=new Date(e.targetDate).getTime();this.daysElement=t.querySelector('[data-type="days"]'),this.hoursElement=t.querySelector('[data-type="hours"]'),this.minutesElement=t.querySelector('[data-type="minutes"]'),this.secondsElement=t.querySelector('[data-type="seconds"]'),this.updateCountdown(i);const s=setInterval((()=>{this.updateCountdown(i),i<=(new Date).getTime()&&clearInterval(s)}),1e3)}updateCountdown(t){const e=t-(new Date).getTime(),i=Math.max(0,Math.floor(e/864e5)),s=Math.max(0,Math.floor(e%864e5/36e5)),n=Math.max(0,Math.floor(e%36e5/6e4)),o=Math.max(0,Math.floor(e%6e4/1e3));this.daysElement.textContent=i.toString().padStart(2,"0"),this.hoursElement.textContent=s.toString().padStart(2,"0"),this.minutesElement.textContent=n.toString().padStart(2,"0"),this.secondsElement.textContent=o.toString().padStart(2,"0")}});const U=new class{constructor(){N(this,"getLocalStorageRecipeRatings",(()=>{var t=localStorage.getItem("recipe-ratings");return t?JSON.parse(t):{}})),N(this,"setLocalStorageRecipeRatings",(t=>{localStorage.setItem("recipe-ratings",JSON.stringify(t))})),N(this,"getLocalStorageRating",(t=>this.getLocalStorageRecipeRatings()[t]||null)),N(this,"setLocalStorageRating",((t,e)=>{const i=this.getLocalStorageRecipeRatings();i[t]=e,this.setLocalStorageRecipeRatings(i)})),N(this,"removeLocalStorageRating",(t=>{const e=this.getLocalStorageRecipeRatings();delete e[t],this.setLocalStorageRecipeRatings(e)})),N(this,"handleDone",(t=>t.json().then((t=>(this.updateListeners(t.recipe.id,t),t))))),N(this,"addListener",((t,e)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)})),N(this,"set",((t,e)=>{const i=this.getLocalStorageRating(t);return i?F(this.baseUrl+"/"+i.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this.handleDone):F(this.baseUrl+"/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this.handleDone)})),N(this,"get",(t=>{const e=this.getLocalStorageRating(t);return e&&e.id?(this.updateListeners(t,e),F(this.baseUrl+"/"+e.id,{method:"GET",headers:{"Content-Type":"application/json"}}).then(this.handleDone)):new Promise((function(t){t(null)}))})),this.baseUrl="/_api/recipe-ratings",this.listeners={}}updateListeners(t,e){null===e?this.removeLocalStorageRating(t):this.setLocalStorageRating(t,e),this.listeners[t]&&this.listeners[t].forEach((function(t){t(e)}))}};a().registerComponent("recipe-rating",class{initialize(t,e){this.ratingButtons=t.querySelectorAll("button"),this.preciseRating=e.preciseRating,this.passiveRatings=document.getElementById("recipe-rating-passive"),this.passiveRatingButtons=this.passiveRatings.querySelectorAll(".recipe__rating-star"),this.ratingTitleElement=t.querySelector(`#${t.id}-rating-title`),this.ratingCount=document.querySelector(".recipe__rating-count"),this.data=null,this.partialActiveClass="recipe__rating-star--partial-active",this.updateRating(U.getLocalStorageRating(e.recipeId)),this.ratingButtons.forEach((i=>{i.addEventListener("click",(t=>{const i=t.currentTarget.dataset.value;if(!U.getLocalStorageRating(e.recipeId)&&this.ratingCount){const t=this.ratingCount.innerText,e=parseInt(t.substring(1,t.length-1));this.ratingCount.innerText=`(${e+1})`}U.set(e.recipeId,{rating:i}).then((t=>{this.data=t,this.updateRating(t)}))})),i.addEventListener("mouseover",(t=>{this.setActiveStars(t.currentTarget.dataset.value)})),i.addEventListener("mouseleave",(()=>{this.setActiveStars(this.data?this.data.rating:t.dataset.rating)}))}))}updateRating(t){t&&(this.ratingTitleElement&&(this.ratingTitleElement.innerText="Meine Bewertung"),this.setActiveStars(t.rating,t.recipe.preciseRating))}setActiveStars(t,e){if(this.ratingButtons.forEach((function(e){e.dataset.active=String(e.dataset.value<=t)})),e){const t=this.decimalToPercentage(e);this.passiveRatings.style.setProperty("--percentage",t+"%"),this.passiveRatingButtons.forEach((function(t){t.dataset.active=String(t.dataset.value<=e)}));const i=this.passiveRatings.querySelector("."+this.partialActiveClass);if(i&&i.classList.remove(this.partialActiveClass),"100"!==t){const t=Math.ceil(e)-1;this.passiveRatingButtons[t].classList.add(this.partialActiveClass)}}}decimalToPercentage(t){const e=t.toFixed(2).split(".");return"00"===e[1]?"100":e[1]}});a().registerComponent("location-back",class{initialize(t){const e=document.referrer,i=window.location.origin;e.startsWith(i)&&(t.href=e,t.removeAttribute("hidden"))}});const j=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(...t){["scroll","touchmove","touchstart"].includes(t[0])&&(t[2]=!!k()&&{passive:!1}),j.call(this,...t)},window.$=n(),window.web=a(),a().registerComponent("expand",l()),a().registerComponent("accordion",c()),a().startComponents(window.WEB_COMPONENTS),a().callServices(window.WEB_SERVICES)}},t=>{"use strict";t.O(0,[175],(()=>{return e=573,t(t.s=e);var e}));t.O()}]);